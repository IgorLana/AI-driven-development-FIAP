(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{1737:(e,t,r)=>{Promise.resolve().then(r.bind(r,5769))},5769:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(2115),l=r(5739);let o=["\uD83D\uDE22","\uD83D\uDE15","\uD83D\uDE10","\uD83D\uDE42","\uD83D\uDE04"],n=["Muito Ruim","Ruim","Neutro","Bom","Muito Bom"];function d(){let[e,t]=(0,s.useState)(3),[r,d]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[u,g]=(0,s.useState)([]),[m,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[w,S]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{P()},[]);let P=async e=>{p(!0),N("");try{let{data:t,nextCursor:r}=(await l.Ps.getHistory(7,e)).data;g(r=>e?[...r,...t]:t),S(r),C(null!==r)}catch(e){N("N\xe3o foi poss\xedvel carregar o hist\xf3rico. Verifique sua conex\xe3o.")}finally{p(!1)}},T=async a=>{a.preventDefault(),y(""),f(""),h(!0);try{let a=r.split(",").map(e=>e.trim()).filter(e=>e.length>0&&e.length<=5),s=await l.Ps.create(e,a,i||void 0);f("Mood log salvo! +".concat(s.data.xpEarned," XP")),d(""),c(""),t(3),P()}catch(e){var s,o,n;y(null!==(n=null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)&&void 0!==n?n:"Erro ao salvar mood log")}finally{h(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mood Logs"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Como voc\xea est\xe1 se sentindo?"}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Selecione seu humor (1-5)"}),(0,a.jsx)("div",{className:"flex justify-between items-center gap-2",children:[1,2,3,4,5].map(r=>(0,a.jsxs)("button",{type:"button",onClick:()=>t(r),className:"flex-1 p-4 rounded-lg border-2 transition-all ".concat(e===r?"border-blue-500 bg-blue-50 scale-110":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:o[r-1]}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:n[r-1]})]},r))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (separadas por v\xedrgula, max 5 caracteres cada)"}),(0,a.jsx)("input",{id:"tags",type:"text",value:r,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"happy, work, tired"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nota (opcional, max 500 caracteres)"}),(0,a.jsx)("textarea",{id:"note",value:i,onChange:e=>c(e.target.value),maxLength:500,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Como foi seu dia?"})]}),b&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:b}),v&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:v}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50",children:m?"Salvando...":"Salvar Mood Log (+5 XP)"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Hist\xf3rico"}),j&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:j}),0!==u.length||j?(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:o[e.mood-1]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:n[e.mood-1]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.loggedAt).toLocaleDateString("pt-BR")})]})]})}),e.tags.length>0&&(0,a.jsx)("div",{className:"flex gap-2 mb-2",children:e.tags.map((e,t)=>(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e},t))}),e.note&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.note})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-600",children:"Nenhum mood log registrado ainda."}),k&&(0,a.jsx)("button",{onClick:()=>P(w),disabled:x,className:"mt-4 w-full text-blue-600 border border-blue-300 py-2 rounded-lg hover:bg-blue-50 transition-colors disabled:opacity-50",children:x?"Carregando...":"Carregar mais"})]})]})]})}},5739:(e,t,r)=>{"use strict";r.d(t,{Ps:()=>u,R2:()=>i,hG:()=>g,lu:()=>c,rh:()=>m});var a=r(423);let s="http://localhost:3001/api/v1",l=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let o=!1,n=[];function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach(r=>{let{resolve:a,reject:s}=r;e?s(e):a(t)}),n=[]}l.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){if(o)return new Promise((e,t)=>{n.push({resolve:e,reject:t})}).then(e=>(r.headers.Authorization="Bearer ".concat(e),l(r)));r._retry=!0,o=!0;let t=localStorage.getItem("refreshToken");if(!t)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{data:e}=await a.A.post("".concat(s,"/auth/refresh"),{refreshToken:t}),o=e.accessToken;return localStorage.setItem("accessToken",o),e.refreshToken&&localStorage.setItem("refreshToken",e.refreshToken),d(null,o),r.headers.Authorization="Bearer ".concat(o),l(r)}catch(e){return d(e,null),localStorage.clear(),window.location.href="/login",Promise.reject(e)}finally{o=!1}}return Promise.reject(e)});let i={login:(e,t,r)=>l.post("/auth/login",{email:e,password:t,companyDomain:r}),register:(e,t,r,a)=>l.post("/auth/register",{name:e,email:t,password:r,companyDomain:a}),refresh:e=>l.post("/auth/refresh",{refreshToken:e}),logout:e=>l.post("/auth/logout",{refreshToken:e})},c={getMe:()=>l.get("/users/me"),getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2?arguments[2]:void 0;return l.get("/users",{params:{page:e,limit:t,role:r}})},update:(e,t)=>l.patch("/users/".concat(e),t)},u={create:(e,t,r)=>l.post("/mood-logs",{mood:e,tags:t,note:r}),getHistory:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;return l.get("/mood-logs/history",{params:{limit:e,...t?{cursor:t}:{}}})}},g={getDaily:()=>l.get("/challenges/daily"),complete:e=>l.post("/challenges/".concat(e,"/complete")),create:e=>l.post("/challenges",e)},m={getMoodSummary:(e,t)=>l.get("/analytics/mood-summary",{params:{startDate:e,endDate:t}})}}},e=>{var t=t=>e(e.s=t);e.O(0,[423,441,517,358],()=>t(1737)),_N_E=e.O()}]);