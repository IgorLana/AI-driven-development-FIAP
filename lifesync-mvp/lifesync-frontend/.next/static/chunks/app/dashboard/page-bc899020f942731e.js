(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{249:(e,t,s)=>{Promise.resolve().then(s.bind(s,5399))},5399:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),o=s(5459),l=s(8173),a=s.n(l);function n(){let{user:e}=(0,o.A)();return e?(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Dashboard"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total XP"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:e.xp})]}),(0,r.jsx)("div",{className:"text-4xl",children:"â­"})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"N\xedvel Atual"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:e.level})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83C\uDFC6"})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Fun\xe7\xe3o"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:e.role})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDC64"})]})})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-md p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Bem-vindo, ",e.name,"!"]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Voc\xea est\xe1 no n\xedvel ",(0,r.jsx)("strong",{children:e.level})," com ",(0,r.jsxs)("strong",{children:[e.xp," XP"]}),"."]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Continue registrando seu humor e completando desafios para ganhar mais XP e subir de n\xedvel!"})]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-md p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:"\uD83D\uDE0A Mood Logs"}),(0,r.jsx)("p",{className:"text-blue-100 mb-4",children:"Registre como voc\xea est\xe1 se sentindo hoje"}),(0,r.jsx)(a(),{href:"/dashboard/mood-logs",className:"inline-block bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Ir para Mood Logs"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-md p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:"\uD83C\uDFAF Desafios"}),(0,r.jsx)("p",{className:"text-green-100 mb-4",children:"Complete desafios e ganhe XP"}),(0,r.jsx)(a(),{href:"/dashboard/challenges",className:"inline-block bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-green-50 transition-colors",children:"Ver Desafios"})]})]})]}):null}},5459:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,AuthProvider:()=>c});var r=s(5155),o=s(2115),l=s(6046),a=s(5739);let n=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0),h=(0,l.useRouter)();(0,o.useEffect)(()=>{localStorage.getItem("accessToken")?u():d(!1)},[]);let u=async()=>{try{let e=await a.lu.getMe();c(e.data)}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{d(!1)}},m=async(e,t,s)=>{let r=(await a.R2.login(e,t,s)).data;localStorage.setItem("accessToken",r.accessToken),localStorage.setItem("refreshToken",r.refreshToken),c(r.user),h.push("/dashboard")},g=async(e,t,s,r)=>{let o=(await a.R2.register(e,t,s,r)).data;localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("refreshToken",o.refreshToken),c(o.user),h.push("/dashboard")},x=async()=>{let e=localStorage.getItem("refreshToken");if(e)try{await a.R2.logout(e)}catch(e){console.warn("Logout remoto falhou:",e.message)}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null),h.push("/login")};return(0,r.jsx)(n.Provider,{value:{user:s,loading:i,login:m,register:g,logout:x},children:t})}function i(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5739:(e,t,s)=>{"use strict";s.d(t,{Ps:()=>h,R2:()=>i,hG:()=>u,lu:()=>d,rh:()=>m});var r=s(423);let o="http://localhost:3001/api/v1",l=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let a=!1,n=[];function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach(s=>{let{resolve:r,reject:o}=s;e?o(e):r(t)}),n=[]}l.interceptors.response.use(e=>e,async e=>{var t;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!s._retry){if(a)return new Promise((e,t)=>{n.push({resolve:e,reject:t})}).then(e=>(s.headers.Authorization="Bearer ".concat(e),l(s)));s._retry=!0,a=!0;let t=localStorage.getItem("refreshToken");if(!t)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{data:e}=await r.A.post("".concat(o,"/auth/refresh"),{refreshToken:t}),a=e.accessToken;return localStorage.setItem("accessToken",a),e.refreshToken&&localStorage.setItem("refreshToken",e.refreshToken),c(null,a),s.headers.Authorization="Bearer ".concat(a),l(s)}catch(e){return c(e,null),localStorage.clear(),window.location.href="/login",Promise.reject(e)}finally{a=!1}}return Promise.reject(e)});let i={login:(e,t,s)=>l.post("/auth/login",{email:e,password:t,companyDomain:s}),register:(e,t,s,r)=>l.post("/auth/register",{name:e,email:t,password:s,companyDomain:r}),refresh:e=>l.post("/auth/refresh",{refreshToken:e}),logout:e=>l.post("/auth/logout",{refreshToken:e})},d={getMe:()=>l.get("/users/me"),getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2?arguments[2]:void 0;return l.get("/users",{params:{page:e,limit:t,role:s}})},update:(e,t)=>l.patch("/users/".concat(e),t)},h={create:(e,t,s)=>l.post("/mood-logs",{mood:e,tags:t,note:s}),getHistory:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;return l.get("/mood-logs/history",{params:{limit:e,...t?{cursor:t}:{}}})}},u={getDaily:()=>l.get("/challenges/daily"),complete:e=>l.post("/challenges/".concat(e,"/complete")),create:e=>l.post("/challenges",e)},m={getMoodSummary:(e,t)=>l.get("/analytics/mood-summary",{params:{startDate:e,endDate:t}})}}},e=>{var t=t=>e(e.s=t);e.O(0,[423,28,441,517,358],()=>t(249)),_N_E=e.O()}]);