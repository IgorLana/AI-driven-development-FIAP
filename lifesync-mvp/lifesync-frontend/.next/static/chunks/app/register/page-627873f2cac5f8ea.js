(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1716:(e,t,r)=>{Promise.resolve().then(r.bind(r,6432))},6432:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),o=r(2115),s=r(5459),l=r(8173),n=r.n(l);function c(){let[e,t]=(0,o.useState)(""),[r,l]=(0,o.useState)(""),[c,i]=(0,o.useState)(""),[u,d]=(0,o.useState)(""),[m,h]=(0,o.useState)(""),[g,p]=(0,o.useState)(!1),{register:f}=(0,s.A)(),b=async t=>{t.preventDefault(),h(""),p(!0);try{await f(e,r,c,u)}catch(e){var a,o,s;h(null!==(s=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==s?s:"Erro ao registrar")}finally{p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Criar Conta"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Junte-se ao LifeSync"})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo"}),(0,a.jsx)("input",{id:"name",type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jo\xe3o Silva"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,a.jsx)("input",{id:"password",type:"password",value:c,onChange:e=>i(e.target.value),required:!0,minLength:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"companyDomain",className:"block text-sm font-medium text-gray-700 mb-2",children:"Dom\xednio da Empresa"}),(0,a.jsx)("input",{id:"companyDomain",type:"text",value:u,onChange:e=>d(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"acme.com"})]}),m&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Registrando...":"Criar Conta"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["J\xe1 tem uma conta?"," ",(0,a.jsx)(n(),{href:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Fa\xe7a login"})]})})]})})}},5459:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>c});var a=r(5155),o=r(2115),s=r(6046),l=r(5739);let n=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,o.useState)(null),[i,u]=(0,o.useState)(!0),d=(0,s.useRouter)();(0,o.useEffect)(()=>{localStorage.getItem("accessToken")?m():u(!1)},[]);let m=async()=>{try{let e=await l.lu.getMe();c(e.data)}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{u(!1)}},h=async(e,t,r)=>{let a=(await l.R2.login(e,t,r)).data;localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),c(a.user),d.push("/dashboard")},g=async(e,t,r,a)=>{let o=(await l.R2.register(e,t,r,a)).data;localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("refreshToken",o.refreshToken),c(o.user),d.push("/dashboard")},p=async()=>{let e=localStorage.getItem("refreshToken");if(e)try{await l.R2.logout(e)}catch(e){console.warn("Logout remoto falhou:",e.message)}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null),d.push("/login")};return(0,a.jsx)(n.Provider,{value:{user:r,loading:i,login:h,register:g,logout:p},children:t})}function i(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5739:(e,t,r)=>{"use strict";r.d(t,{Ps:()=>d,R2:()=>i,hG:()=>m,lu:()=>u,rh:()=>h});var a=r(423);let o="http://localhost:3001/api/v1",s=a.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l=!1,n=[];function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach(r=>{let{resolve:a,reject:o}=r;e?o(e):a(t)}),n=[]}s.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){if(l)return new Promise((e,t)=>{n.push({resolve:e,reject:t})}).then(e=>(r.headers.Authorization="Bearer ".concat(e),s(r)));r._retry=!0,l=!0;let t=localStorage.getItem("refreshToken");if(!t)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{data:e}=await a.A.post("".concat(o,"/auth/refresh"),{refreshToken:t}),l=e.accessToken;return localStorage.setItem("accessToken",l),e.refreshToken&&localStorage.setItem("refreshToken",e.refreshToken),c(null,l),r.headers.Authorization="Bearer ".concat(l),s(r)}catch(e){return c(e,null),localStorage.clear(),window.location.href="/login",Promise.reject(e)}finally{l=!1}}return Promise.reject(e)});let i={login:(e,t,r)=>s.post("/auth/login",{email:e,password:t,companyDomain:r}),register:(e,t,r,a)=>s.post("/auth/register",{name:e,email:t,password:r,companyDomain:a}),refresh:e=>s.post("/auth/refresh",{refreshToken:e}),logout:e=>s.post("/auth/logout",{refreshToken:e})},u={getMe:()=>s.get("/users/me"),getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2?arguments[2]:void 0;return s.get("/users",{params:{page:e,limit:t,role:r}})},update:(e,t)=>s.patch("/users/".concat(e),t)},d={create:(e,t,r)=>s.post("/mood-logs",{mood:e,tags:t,note:r}),getHistory:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;return s.get("/mood-logs/history",{params:{limit:e,...t?{cursor:t}:{}}})}},m={getDaily:()=>s.get("/challenges/daily"),complete:e=>s.post("/challenges/".concat(e,"/complete")),create:e=>s.post("/challenges",e)},h={getMoodSummary:(e,t)=>s.get("/analytics/mood-summary",{params:{startDate:e,endDate:t}})}}},e=>{var t=t=>e(e.s=t);e.O(0,[423,28,441,517,358],()=>t(1716)),_N_E=e.O()}]);